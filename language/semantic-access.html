
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>Semantic Access &#8212; The SMOL Language  documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/basic_mod.css?v=0.7.0-1" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/sphinx_highlight.js"></script>
    <script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
    <script>mermaid.initialize({startOnLoad:true});</script>
    <script src="../_static/js/theme.js"></script>
    <script src="../_static/js/petite-vue.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Functional Mock-Up Objects" href="fmos.html" />
    <link rel="prev" title="Classes" href="classes.html" /> 
  </head><body data-dark_mode_code_blocks="true">

<div id="top_nav">
    

    <nav>
        
            
        

        <p id="toggle_sidebar">
            <a href="#" title="Toggle sidebar">|||</a>
        </p>
        <h1><a href="../index.html" title="Go to homepage">SMOL</a></h1>
            <a id="source_link" href="https://github.com/smolang/SemanticObjects/">
    
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512">
            <path fill="white" d="M 244.8,8 C 106.1,8 0,113.3 0,252 c 0,110.9 69.8,205.8 169.5,239.2 12.8,2.3 17.3,-5.6 17.3,-12.1 0,-6.2 -0.3,-40.4 -0.3,-61.4 0,0 -70,15 -84.7,-29.8 0,0 -11.4,-29.1 -27.8,-36.6 0,0 -22.9,-15.7 1.6,-15.4 0,0 24.9,2 38.6,25.8 21.9,38.6 58.6,27.5 72.9,20.9 2.3,-16 8.8,-27.1 16,-33.7 -55.9,-6.2 -112.3,-14.3 -112.3,-110.5 0,-27.5 7.6,-41.3 23.6,-58.9 -2.6,-6.5 -11.1,-33.3 2.6,-67.9 20.9,-6.5 69,27 69,27 20,-5.6 41.5,-8.5 62.8,-8.5 21.3,0 42.8,2.9 62.8,8.5 0,0 48.1,-33.6 69,-27 13.7,34.7 5.2,61.4 2.6,67.9 16,17.7 25.8,31.5 25.8,58.9 0,96.5 -58.9,104.2 -114.8,110.5 9.2,7.9 17,22.9 17,46.4 0,33.7 -0.3,75.4 -0.3,83.6 0,6.5 4.6,14.4 17.3,12.1 C 428.2,457.8 496,362.9 496,252 496,113.3 383.5,8 244.8,8 Z"/>
        </svg>
    
</a>
        

        <a id="mode_toggle" href="#" @click.prevent="handleClick" :title="mode">
    <template v-if="mode == 'light'">
        <svg width="100%" height="100%" viewBox="0 0 79 80" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;"><g id="mode_light"><rect id="Bounds" x="0" y="-0" width="78.623" height="79.049" style="fill:none;"/><circle cx="39.311" cy="39.524" r="15.734" style="fill:#fff;"/><g id="beams"><g id="beam"><path id="beam1" serif:id="beam" d="M44.212,4.901c0,-2.705 -2.196,-4.901 -4.901,-4.901c-2.704,-0 -4.9,2.196 -4.9,4.901l-0,9.614c-0,2.705 2.196,4.901 4.9,4.901c2.705,0 4.901,-2.196 4.901,-4.901l0,-9.614Z" style="fill:#fff;"/></g><g id="beam2" serif:id="beam"><path id="beam3" serif:id="beam" d="M67.48,18.073c1.913,-1.912 1.913,-5.018 0,-6.931c-1.912,-1.912 -5.018,-1.912 -6.931,0l-6.798,6.799c-1.912,1.912 -1.912,5.018 0,6.931c1.913,1.912 5.018,1.912 6.931,-0l6.798,-6.799Z" style="fill:#fff;"/></g><g id="beam4" serif:id="beam"><path id="beam5" serif:id="beam" d="M25.728,61.108c1.912,-1.913 1.912,-5.018 -0,-6.931c-1.913,-1.913 -5.019,-1.913 -6.931,-0l-6.799,6.798c-1.912,1.913 -1.912,5.019 0,6.931c1.913,1.913 5.019,1.913 6.931,0l6.799,-6.798Z" style="fill:#fff;"/></g><g id="beam6" serif:id="beam"><path id="beam7" serif:id="beam" d="M60.682,54.177c-1.913,-1.913 -5.018,-1.913 -6.931,-0c-1.912,1.913 -1.912,5.018 0,6.931l6.798,6.798c1.913,1.913 5.019,1.913 6.931,0c1.913,-1.912 1.913,-5.018 0,-6.931l-6.798,-6.798Z" style="fill:#fff;"/></g><g id="beam8" serif:id="beam"><path id="beam9" serif:id="beam" d="M4.901,34.623c-2.705,0 -4.901,2.196 -4.901,4.901c0,2.705 2.196,4.901 4.901,4.901l9.614,0c2.705,0 4.901,-2.196 4.901,-4.901c0,-2.705 -2.196,-4.901 -4.901,-4.901l-9.614,0Z" style="fill:#fff;"/></g><g id="beam10" serif:id="beam"><path id="beam11" serif:id="beam" d="M44.212,64.534c0,-2.705 -2.196,-4.901 -4.901,-4.901c-2.704,-0 -4.9,2.196 -4.9,4.901l-0,9.614c-0,2.705 2.196,4.901 4.9,4.901c2.705,-0 4.901,-2.196 4.901,-4.901l0,-9.614Z" style="fill:#fff;"/></g><g id="beam12" serif:id="beam"><path id="beam13" serif:id="beam" d="M18.929,11.142c-1.912,-1.912 -5.018,-1.912 -6.931,0c-1.912,1.913 -1.912,5.019 0,6.931l6.799,6.799c1.912,1.912 5.018,1.912 6.931,-0c1.912,-1.913 1.912,-5.019 -0,-6.931l-6.799,-6.799Z" style="fill:#fff;"/></g><g id="beam14" serif:id="beam"><path id="beam15" serif:id="beam" d="M64.108,34.623c-2.705,0 -4.901,2.196 -4.901,4.901c-0,2.705 2.196,4.901 4.901,4.901l9.614,0c2.705,0 4.901,-2.196 4.901,-4.901c-0,-2.705 -2.196,-4.901 -4.901,-4.901l-9.614,0Z" style="fill:#fff;"/></g></g></g></svg>
    </template>

    <template v-if="mode == 'dark'">
        <svg width="100%" height="100%" viewBox="0 0 79 80" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;"><g id="mode_dark"><rect id="Bounds" x="0" y="-0" width="78.623" height="79.049" style="fill:none;"/><circle cx="39.311" cy="39.524" r="15.734" style="fill:#fff;"/><g id="beams"><g id="beam"><path id="beam1" serif:id="beam" d="M44.212,14.515c0,-2.705 -2.196,-4.901 -4.901,-4.901c-2.704,0 -4.901,2.196 -4.901,4.901c0,2.705 2.197,4.901 4.901,4.901c2.705,0 4.901,-2.196 4.901,-4.901Z" style="fill:#fff;"/></g><g id="beam2" serif:id="beam"><path id="beam3" serif:id="beam" d="M60.662,24.892c1.902,-1.902 1.902,-4.99 0,-6.892l-0.04,-0.039c-1.901,-1.902 -4.989,-1.902 -6.891,-0c-1.901,1.901 -1.901,4.989 0,6.891l0.04,0.04c1.902,1.901 4.989,1.901 6.891,-0Z" style="fill:#fff;"/></g><g id="beam4" serif:id="beam"><path id="beam5" serif:id="beam" d="M25.732,61.103c1.91,-1.91 1.91,-5.011 0,-6.921l-0.009,-0.01c-1.91,-1.91 -5.012,-1.91 -6.921,-0c-1.91,1.91 -1.91,5.011 -0,6.921l0.01,0.01c1.909,1.91 5.011,1.91 6.92,-0Z" style="fill:#fff;"/></g><g id="beam6" serif:id="beam"><path id="beam7" serif:id="beam" d="M60.672,54.167c-1.907,-1.907 -5.004,-1.907 -6.911,0l-0.02,0.02c-1.907,1.907 -1.907,5.004 0,6.911c1.907,1.907 5.004,1.907 6.911,-0l0.02,-0.02c1.907,-1.907 1.907,-5.004 0,-6.911Z" style="fill:#fff;"/></g><g id="beam8" serif:id="beam"><path id="beam9" serif:id="beam" d="M14.52,34.623c-2.702,0 -4.896,2.194 -4.896,4.896l0,0.01c0,2.702 2.194,4.896 4.896,4.896c2.702,0 4.896,-2.194 4.896,-4.896l-0,-0.01c-0,-2.702 -2.194,-4.896 -4.896,-4.896Z" style="fill:#fff;"/></g><g id="beam10" serif:id="beam"><path id="beam11" serif:id="beam" d="M44.212,64.534c0,-2.705 -2.196,-4.901 -4.901,-4.901c-2.704,-0 -4.901,2.196 -4.901,4.901c0,2.704 2.197,4.9 4.901,4.9c2.705,0 4.901,-2.196 4.901,-4.9Z" style="fill:#fff;"/></g><g id="beam12" serif:id="beam"><path id="beam13" serif:id="beam" d="M25.73,17.943c-1.911,-1.911 -5.015,-1.911 -6.926,0l-0.005,0.005c-1.911,1.911 -1.911,5.015 0,6.926c1.911,1.911 5.015,1.911 6.926,0l0.005,-0.005c1.911,-1.911 1.911,-5.014 -0,-6.926Z" style="fill:#fff;"/></g><g id="beam14" serif:id="beam"><path id="beam15" serif:id="beam" d="M64.098,34.623c-2.699,0 -4.891,2.192 -4.891,4.892l-0,0.019c-0,2.699 2.192,4.891 4.891,4.891c2.7,0 4.892,-2.192 4.892,-4.891l0,-0.019c0,-2.7 -2.192,-4.892 -4.892,-4.892Z" style="fill:#fff;"/></g></g></g></svg>
    </template>

    <template v-if="mode == 'darkest'">
        <svg width="100%" height="100%" viewBox="0 0 79 80" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;"><g id="mode_darkest"><rect id="Bounds" x="0" y="-0" width="78.623" height="79.049" style="fill:none;"/><path d="M39.315,23.791c8.684,-0 15.734,7.05 15.734,15.733c0,8.684 -7.05,15.734 -15.734,15.734c-8.683,0 -15.733,-7.05 -15.733,-15.734c-0,-8.683 7.05,-15.733 15.733,-15.733Zm0,4.737c6.069,0 10.997,4.927 10.997,10.996c-0,6.069 -4.928,10.996 -10.997,10.996c-6.068,0 -10.996,-4.927 -10.996,-10.996c0,-6.069 4.928,-10.996 10.996,-10.996Z" style="fill:#fff;"/><g id="beams"><g id="beam"><path id="beam1" serif:id="beam" d="M44.216,14.515c0,-2.705 -2.196,-4.901 -4.901,-4.901c-2.704,0 -4.9,2.196 -4.9,4.901c-0,2.705 2.196,4.901 4.9,4.901c2.705,0 4.901,-2.196 4.901,-4.901Z" style="fill:#fff;"/></g><g id="beam2" serif:id="beam"><path id="beam3" serif:id="beam" d="M60.666,24.892c1.902,-1.902 1.902,-4.99 0,-6.892l-0.04,-0.039c-1.901,-1.902 -4.989,-1.902 -6.891,-0c-1.901,1.901 -1.901,4.989 0,6.891l0.04,0.04c1.902,1.901 4.99,1.901 6.891,-0Z" style="fill:#fff;"/></g><g id="beam4" serif:id="beam"><path id="beam5" serif:id="beam" d="M25.737,61.103c1.909,-1.91 1.909,-5.011 -0,-6.921l-0.01,-0.01c-1.91,-1.91 -5.011,-1.91 -6.921,-0c-1.91,1.91 -1.91,5.011 -0,6.921l0.01,0.01c1.91,1.91 5.011,1.91 6.921,-0Z" style="fill:#fff;"/></g><g id="beam6" serif:id="beam"><path id="beam7" serif:id="beam" d="M60.676,54.167c-1.907,-1.907 -5.004,-1.907 -6.911,0l-0.02,0.02c-1.907,1.907 -1.907,5.004 0,6.911c1.907,1.907 5.004,1.907 6.911,-0l0.02,-0.02c1.907,-1.907 1.907,-5.004 0,-6.911Z" style="fill:#fff;"/></g><g id="beam8" serif:id="beam"><path id="beam9" serif:id="beam" d="M14.524,34.623c-2.702,0 -4.896,2.194 -4.896,4.896l0,0.01c0,2.702 2.194,4.896 4.896,4.896c2.702,0 4.896,-2.194 4.896,-4.896l0,-0.01c0,-2.702 -2.194,-4.896 -4.896,-4.896Z" style="fill:#fff;"/></g><g id="beam10" serif:id="beam"><path id="beam11" serif:id="beam" d="M44.216,64.534c0,-2.705 -2.196,-4.901 -4.901,-4.901c-2.704,-0 -4.9,2.196 -4.9,4.901c-0,2.704 2.196,4.9 4.9,4.9c2.705,0 4.901,-2.196 4.901,-4.9Z" style="fill:#fff;"/></g><g id="beam12" serif:id="beam"><path id="beam13" serif:id="beam" d="M25.734,17.943c-1.911,-1.911 -5.015,-1.911 -6.926,0l-0.005,0.005c-1.911,1.911 -1.911,5.015 0,6.926c1.911,1.911 5.015,1.911 6.926,0l0.005,-0.005c1.911,-1.911 1.911,-5.014 0,-6.926Z" style="fill:#fff;"/></g><g id="beam14" serif:id="beam"><path id="beam15" serif:id="beam" d="M64.103,34.623c-2.7,0 -4.892,2.192 -4.892,4.892l-0,0.019c-0,2.699 2.192,4.891 4.892,4.891c2.699,0 4.891,-2.192 4.891,-4.891l0,-0.019c0,-2.7 -2.192,-4.892 -4.891,-4.892Z" style="fill:#fff;"/></g></g></g></svg>
    </template>
</a>

<script>
(function() {
    const LOCAL_STORAGE_KEY = 'piccoloThemeMode'

    var initialMode = localStorage.getItem(LOCAL_STORAGE_KEY)

    if (initialMode) {
        // Make sure the value in local storage is valid
        if (['light', 'dark', 'darkest'].indexOf(initialMode) == -1) {
            initialMode = 'light'
            localStorage.setItem(LOCAL_STORAGE_KEY, initialMode)
        }
    } else {
        // Check if the client prefers dark mode
        if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
            initialMode = 'dark'
        } else {
            initialMode = 'light'
        }
        localStorage.setItem(LOCAL_STORAGE_KEY, initialMode)
    }

    document.documentElement.dataset.mode = initialMode

    PetiteVue.createApp({
        'mode': initialMode,
        handleClick() {
            let currentMode = this.mode

            if (currentMode == 'light') {
                this.mode = 'dark'
            } else if (currentMode == 'dark') {
                this.mode = 'darkest'
            } else if (currentMode == 'darkest') {
                this.mode = 'light'
            }

            document.documentElement.dataset.mode = this.mode
            localStorage.setItem(LOCAL_STORAGE_KEY, this.mode)

            console.log(this.mode)
        }
    }).mount('#mode_toggle')
})()
</script>
            <p class="mobile_search_link">
                <a href="../search.html" title="Search">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 65 64" fill-rule="evenodd" stroke-linejoin="round" stroke-miterlimit="2">
                        <path d="M14.873 40.009c-2.315-3.943-3.642-8.532-3.642-13.429C11.231 11.91 23.141 0 37.811 0s26.58 11.91 26.58 26.58-11.91 26.58-26.58 26.58a26.44 26.44 0 0 1-14.277-4.161L9.739 62.794a3.12 3.12 0 0 1-4.413 0L.913 58.382c-1.217-1.218-1.217-3.196 0-4.413l13.96-13.96zM37.811 8.054c10.225 0 18.526 8.301 18.526 18.526s-8.301 18.526-18.526 18.526-18.526-8.301-18.526-18.526S27.586 8.054 37.811 8.054z" fill="#fff" />
                    </svg>
                </a>
            </p>
        

        <div class="searchbox_wrapper">
            
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
    </nav>
</div>

    
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting-started.html">Getting Started</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../language.html">Language Manual</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="lexical-structure.html">Lexical Structure</a></li>
<li class="toctree-l2"><a class="reference internal" href="datatypes.html">Datatypes</a></li>
<li class="toctree-l2"><a class="reference internal" href="expressions.html">Expressions</a></li>
<li class="toctree-l2"><a class="reference internal" href="statements.html">Statements</a></li>
<li class="toctree-l2"><a class="reference internal" href="classes.html">Classes</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Semantic Access</a></li>
<li class="toctree-l2"><a class="reference internal" href="fmos.html">Functional Mock-Up Objects</a></li>
<li class="toctree-l2"><a class="reference internal" href="../glossary.html">Glossary</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial.html">Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../internals.html">Internals</a></li>
<li class="toctree-l1"><a class="reference internal" href="../publications.html">Publications</a></li>
</ul>

        </div>
      </div>


    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="semantic-access">
<span id="id1"></span><h1>Semantic Access<a class="headerlink" href="#semantic-access" title="Permalink to this heading">¶</a></h1>
<p>The SMOL interpreter implements <em>semantic lifting</em>, the process of generating
a knowledge graph from the current program state.  The generated knowledge
graph can be investigated by external tools after creating a <code class="docutils literal notranslate"><span class="pre">.ttl</span></code> file via
the REPL <code class="docutils literal notranslate"><span class="pre">dump</span></code> command, queried during breakpoints using the REPL commands
listed in <a class="reference internal" href="../getting-started.html#querying-smol"><span class="std std-ref">Commands for Querying SMOL</span></a>, or accessed within the running program itself
via special statements for <em>semantic reflection</em> through OWL concepts, SHACL
shapes or SPARQL queries.</p>
<section id="semantic-lifting">
<h2>Semantic Lifting<a class="headerlink" href="#semantic-lifting" title="Permalink to this heading">¶</a></h2>
<section id="ontology-and-virtualization">
<h3>Ontology and Virtualization<a class="headerlink" href="#ontology-and-virtualization" title="Permalink to this heading">¶</a></h3>
<p>The generated knowledge graph is generated from the following sources:</p>
<ul class="simple">
<li><p>The <em>SMOL ontology</em> defining the general vocabulary and basic axioms for states.</p></li>
<li><p>The <em>class definitions</em> of the SMOL program.</p></li>
<li><p>The knowledge generated from the current <em>runtime state</em> (object instances,
heap and stack).</p></li>
<li><p>A user-defined <em>domain ontology</em>, if supplied.</p></li>
</ul>
<p>The SMOL ontology and domain ontology are given as files, while the heap and
class table are virtualized, i.e., the knowledge graph is built on demand.  If
parts of the knowledge graph are not needed by the current query, they are not
generated.</p>
<p>The generated knowledge graph can be accessed using SPARQL (using the <a class="reference external" href="https://jena.apache.org/documentation/inference/">Apache
Jena reasoner</a>), SHACL
(also using the Apache Jena model) or an OWL/DL concept (using <a class="reference external" href="http://www.hermit-reasoner.com/">HermiT</a>).  The general structure is pictured
below:</p>
<figure class="align-default">
<img alt="../_images/alone.png" src="../_images/alone.png" />
</figure>
<p><em>What is generated, what is input, some example</em></p>
</section>
</section>
<section id="semantic-reflection">
<h2>Semantic Reflection<a class="headerlink" href="#semantic-reflection" title="Permalink to this heading">¶</a></h2>
<p><em>general introduction</em></p>
<section id="modeling-bridge">
<span id="id2"></span><h3>Modeling Bridge<a class="headerlink" href="#modeling-bridge" title="Permalink to this heading">¶</a></h3>
<p>To connect with the domain model, SMOL implements the modeling bridge, a mechanism to manually add axioms over the lifted SMOL objects.
A simple modeling bridge takes as a parameter a string containing a <a class="reference external" href="https://www.w3.org/TR/turtle/#grammar-production-predicateObjectList">predicate object list</a> in turtle syntax.
The IRI of the lifted objects will be attached as the subject for the predicate object list.</p>
<p>A complex modeling bridge is a sequence of guarded modeling bridges, where the guard is an expression over the fields of an object.
The guarded predicate object list is used if the corresponding guard evaluated to true. Guarded modeling bridges are evaluated from the top until a guard evaluates to true, the remaining part is skipped. A complex modeling bridge must end with a simple modeling bridge as the default.</p>
<p>A simple modeling bridge can be annotated either to an object creation or to a class.
A complex modeling bridge can annotated only to classes.
If a modeling bridge is given for a class and an object creation of this class, the bridge of the object
overrides the one of the class.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>MODELS ::= SIMPLE_MODELS | COMPLEX_MODELS ;
SIMPLE_MODELS  ::= `models` STRING `;`;
COMPLEX_MODELS ::= `models` `(` Expression `)` STRING `;` MODELS;
</pre></div>
</div>
<p>Example</p>
<div class="highlight-Java notranslate"><div class="highlight"><pre><span></span><span class="kd">class</span> <span class="nf">C</span><span class="w"> </span><span class="p">(</span><span class="n">Int</span><span class="w"> </span><span class="n">i</span><span class="p">)</span>
<span class="w">  </span><span class="n">models</span><span class="w"> </span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="na">i</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="s">&quot;a :containsPositive&quot;</span><span class="p">;</span>
<span class="w">  </span><span class="n">models</span><span class="w"> </span><span class="s">&quot;a :containsNonPositive&quot;</span><span class="p">;</span>
<span class="n">end</span>

<span class="n">main</span>
<span class="w">  </span><span class="n">C</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">C</span><span class="p">(</span><span class="mi">5</span><span class="p">);</span>
<span class="w">  </span><span class="n">C</span><span class="w"> </span><span class="n">d</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">C</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
<span class="w">  </span><span class="n">C</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">C</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span><span class="w"> </span><span class="n">models</span><span class="w"> </span><span class="s">&quot;a :special&quot;</span><span class="p">;</span>
<span class="n">end</span>
</pre></div>
</div>
<p>The lifting will contain the following axioms:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>run:obj1 prog:C_i 5;
         a prog:C.
run:obj2 prog:C_i 0;
         a prog:C.
run:obj3 prog:C_i 4;
         a prog:C.
run:obj1 a :containsPositive.
run:obj2 a :containsNonPositive.
run:obj3 a :special.
</pre></div>
</div>
<section id="crossing-the-modeling-bridge">
<h4>Crossing the Modeling Bridge<a class="headerlink" href="#crossing-the-modeling-bridge" title="Permalink to this heading">¶</a></h4>
<p>Additionally to adding axioms, the <code class="docutils literal notranslate"><span class="pre">domain</span></code> modifier can be used to create a <em>modelled</em> object.
If a class contains a field or method modified by <code class="docutils literal notranslate"><span class="pre">domain</span></code>, then each SMOL object is lifted to <em>two</em> objects in the knowledge graph,
the standard one using the <code class="docutils literal notranslate"><span class="pre">run:</span></code> prefix (the modelling object), and a second one using the <code class="docutils literal notranslate"><span class="pre">domain:</span></code> prefix (the modelled object). The second object is envisaged to be the corresponding
object in the domain, modelled by the created object. The two objects are connected using the <code class="docutils literal notranslate"><span class="pre">smol:models</span></code> property.</p>
<p>If a field is annotated with <code class="docutils literal notranslate"><span class="pre">domain</span></code>, then it is lifted for the modelled object. Its prefix is also changed to <code class="docutils literal notranslate"><span class="pre">domain</span></code>.
The same holds for methods (see CSSA.). The modelled object is only created during lifting if at least one field or method is annotated with <code class="docutils literal notranslate"><span class="pre">domain</span></code>.</p>
<div class="highlight-Java notranslate"><div class="highlight"><pre><span></span><span class="kd">class</span> <span class="nf">C</span><span class="p">(</span><span class="n">Int</span><span class="w"> </span><span class="n">i</span><span class="p">,</span><span class="w"> </span><span class="n">domain</span><span class="w"> </span><span class="n">Int</span><span class="w"> </span><span class="n">j</span><span class="p">)</span><span class="w"> </span><span class="n">end</span>
<span class="n">main</span>
<span class="w">  </span><span class="n">C</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">C</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">);</span>
<span class="n">end</span>
</pre></div>
</div>
<p>The lifting of the created object is as follows.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>run:obj1 a prog:C.
run:obj1 prog:C_i 5.
run:obj1 domain:models domain:obj1.
domain:obj1 domain:C_i 4.
</pre></div>
</div>
</section>
<section id="ignoring-fields">
<h4>Ignoring Fields<a class="headerlink" href="#ignoring-fields" title="Permalink to this heading">¶</a></h4>
<p>To exclude certain fields in a class from being lifted, they can be annotated with the <code class="docutils literal notranslate"><span class="pre">hidden</span></code> modifier.
The field will be completely ignored during lifting: neither general axioms nor instances are generated.
The <code class="docutils literal notranslate"><span class="pre">hidden</span></code> modifier does not interact with the visibility modifiers
If the field is of object-type, the object it points to will still be lifted.</p>
<div class="highlight-Java notranslate"><div class="highlight"><pre><span></span><span class="kd">class</span> <span class="nf">C</span><span class="w"> </span><span class="p">(</span><span class="n">Int</span><span class="w"> </span><span class="n">i</span><span class="p">,</span><span class="w"> </span><span class="n">hidden</span><span class="w"> </span><span class="n">C</span><span class="w"> </span><span class="n">j</span><span class="p">)</span><span class="w"> </span><span class="n">end</span>
<span class="n">main</span>
<span class="w">  </span><span class="n">C</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">C</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span><span class="kc">null</span><span class="p">);</span>
<span class="w">  </span><span class="n">C</span><span class="w"> </span><span class="n">d</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">C</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span><span class="w"> </span><span class="n">c</span><span class="p">);</span>
<span class="n">end</span>
</pre></div>
</div>
<p>The lifting will contain the following axioms. Note that <code class="docutils literal notranslate"><span class="pre">prog:C_j</span></code> is not mentioned.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>prog:C a smol:Class.
prog:C_i a smol:Field.
prog:C smol:hasField prog:C_i.

run:obj1 a prog:C;
         C_i 5.
run:obj2 a prog:C;
         C_i 6.
</pre></div>
</div>
</section>
<section id="computational-semantic-state-access">
<h4>Computational Semantic State Access<a class="headerlink" href="#computational-semantic-state-access" title="Permalink to this heading">¶</a></h4>
<p>Methods annotated with <code class="docutils literal notranslate"><span class="pre">rule</span></code> generate additional triples during lifting.
To this end, for each created object with such a method, the method is executed <em>in the current state</em> the return value of the execution is then added to the knowledge graph.
The used property has the name <code class="docutils literal notranslate"><span class="pre">prog:&lt;class&gt;_&lt;method&gt;_builtin_res</span></code>.</p>
<div class="highlight-Java notranslate"><div class="highlight"><pre><span></span><span class="kd">class</span> <span class="nf">C</span><span class="p">(</span><span class="n">Int</span><span class="w"> </span><span class="n">i</span><span class="p">)</span>
<span class="w">      </span><span class="n">rule</span><span class="w"> </span><span class="n">Int</span><span class="w"> </span><span class="nf">double</span><span class="p">()</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="na">i</span><span class="o">*</span><span class="k">this</span><span class="p">.</span><span class="na">i</span><span class="p">;</span>
<span class="n">end</span>
<span class="n">main</span>
<span class="w">  </span><span class="n">C</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">C</span><span class="p">(</span><span class="mi">5</span><span class="p">);</span>
<span class="n">end</span>
</pre></div>
</div>
<p>The lifting will generate the following axioms.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>prog:C a smol:Class.
prog:double a smol:Method.
prog:C smol:hasMethod prog:double.
prog:C_double_builtin_res a owl:ObjectProperty;
                          rdfs:domain prog:C;
                          rdfs:range xsd:integer.

run:obj1 a prog:C.
run:obj1 prog:C_i 5.
run:obj1 prog:C_double_builtin_res 25.
</pre></div>
</div>
<p>A <code class="docutils literal notranslate"><span class="pre">rule</span></code> method is not allowed to have side-effects (except exceptions), the following restrictions are statically checked:</p>
<ul class="simple">
<li><p>It cannot have parameters.</p></li>
<li><p>It cannot create objects.</p></li>
<li><p>It cannot call non-<code class="docutils literal notranslate"><span class="pre">rule</span></code> methods.</p></li>
<li><p>It cannot write into any fields.</p></li>
</ul>
</section>
</section>
<section id="query-access">
<h3>Query Access<a class="headerlink" href="#query-access" title="Permalink to this heading">¶</a></h3>
<p>Query access retrieves data from the lifted knowledge graph using queries.</p>
<p>Retrieving a list of literals or lifted objects is done via the <code class="docutils literal notranslate"><span class="pre">access</span></code> top-level expression.
It takes as its first parameter a <code class="docutils literal notranslate"><span class="pre">String</span></code>-literal containing an extended <a class="reference external" href="https://www.w3.org/TR/sparql11-overview/">SPARQL</a> query, which additionally may contain non-answer variables of the form <code class="docutils literal notranslate"><span class="pre">%i</span></code> for some strictly positive number <code class="docutils literal notranslate"><span class="pre">i</span></code>. The set of numbers for the non-answer variables must form an interval [1,n] for some n.
Additionally, the top-level expression takes a list of expressions of the length n.</p>
<p>At runtime, these expressions are evaluated and the result is syntactically substituted for the corresponding non-answer variable.
The SPARQL query is then executed and the results of the <code class="docutils literal notranslate"><span class="pre">?obj</span></code> variable are then translated into a list.
For example, the following retrieves all objects <code class="docutils literal notranslate"><span class="pre">o</span></code> of type <code class="docutils literal notranslate"><span class="pre">C</span></code> with <code class="docutils literal notranslate"><span class="pre">o.aCB.aB.sealing</span> <span class="pre">=</span> <span class="pre">x</span></code>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">List</span><span class="o">&lt;</span><span class="n">C</span><span class="o">&gt;</span> <span class="n">l</span> <span class="o">=</span> <span class="n">access</span><span class="p">(</span><span class="s2">&quot;SELECT ?obj WHERE {?obj prog:C_aCB ?b. ?b prog:B_aB ?a. ?a prog:A_sealing %1 }&quot;</span><span class="p">,</span> <span class="n">this</span><span class="o">.</span><span class="n">x</span><span class="p">);</span>
</pre></div>
</div>
<p>The execution fails if any answer variable than <code class="docutils literal notranslate"><span class="pre">?obj</span></code> is used for retrieval, the elements are not literals or IRIs of lifted objects,
or mixes literals of lifted objects. The compiler outputs a warning if the SPARQL query cannot be shown to always return a list of elements of the type of the target variable.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The query must be tree shaped for type-checking.</p>
</div>
<p>Constructing a list of <em>new</em> objects from a SPARQL query is done via the <code class="docutils literal notranslate"><span class="pre">construct</span></code> top-level expression.
Its parameters are as the one of the <code class="docutils literal notranslate"><span class="pre">access</span></code> top-level expression, but the variables are handled differently:
Each variable must have the name of a field of the type of the target location. For each field there must be one variable. All fields must be of primitive data type.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">C</span><span class="p">(</span><span class="n">Int</span> <span class="n">j1</span><span class="p">,</span> <span class="n">Int</span> <span class="n">j2</span><span class="p">)</span> <span class="n">end</span>
<span class="o">...</span>
<span class="n">List</span><span class="o">&lt;</span><span class="n">C</span><span class="o">&gt;</span> <span class="n">v</span> <span class="o">=</span> <span class="n">construct</span><span class="p">(</span><span class="s2">&quot;SELECT ?j1 ?j2 WHERE { ?y a prog:B. ?y prog:B_i2 ?j2.?y prog:B_a ?x.?x a prog:A. ?x prog:A_i1 ?j1 }&quot;</span><span class="p">);</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For a mechanism to load data into classes with structure, i.e., field of class types, see the <em>advanced semantic access</em> section below.</p>
</div>
</section>
<section id="shape-access">
<h3>Shape Access<a class="headerlink" href="#shape-access" title="Permalink to this heading">¶</a></h3>
<p>Shape access validates the correctness of the lifted knowledge graph with respect to a graph shape using the top-level expression <code class="docutils literal notranslate"><span class="pre">validate(Literal)</span></code>.
The parameter must be a <code class="docutils literal notranslate"><span class="pre">String</span></code>-literal containing a path to <a class="reference external" href="https://www.w3.org/TR/shacl/">SHACL</a> shapes in <a class="reference external" href="https://www.w3.org/TR/turtle/">turtle</a> syntax.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Boolean</span> <span class="n">b</span>  <span class="o">=</span> <span class="n">validate</span><span class="p">(</span><span class="s2">&quot;examples/double.ttl&quot;</span><span class="p">);</span>
</pre></div>
</div>
<p>The execution fails if the file does not accessable or the SHACL shapes are mal-formed.</p>
</section>
<section id="concept-access">
<h3>Concept Access<a class="headerlink" href="#concept-access" title="Permalink to this heading">¶</a></h3>
<p>Concept access retrieves the list of objects described by an OWL concept using the top-level expression <code class="docutils literal notranslate"><span class="pre">member(Literal)</span></code>.
The parameter must be a <code class="docutils literal notranslate"><span class="pre">String</span></code>-literal containing a concept in <a class="reference external" href="https://www.w3.org/TR/owl2-manchester-syntax/">Manchester syntax</a>.
For example, the following retrieves all members of class <code class="docutils literal notranslate"><span class="pre">C</span></code> that model some domain concept <code class="docutils literal notranslate"><span class="pre">domain:D</span></code>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">List</span><span class="o">&lt;</span><span class="n">C</span><span class="o">&gt;</span> <span class="nb">list</span> <span class="o">:=</span> <span class="n">member</span><span class="p">(</span><span class="s2">&quot;&lt;domain:models&gt; some &lt;domain:D&gt;&quot;</span><span class="p">);</span>
</pre></div>
</div>
<p>The execution fails if the concept is either mal-formed or contains elements that are not IRIs of lifted objects.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Currently, type checking of concept access is not supported.</p>
</div>
</section>
</section>
<section id="time-series-access">
<h2>Time Series Access<a class="headerlink" href="#time-series-access" title="Permalink to this heading">¶</a></h2>
<p>While not semantic, a syntactically similar mechanism is available to query data from <a class="reference external" href="https://www.influxdata.com/">InfluxDB</a> databases.
Syntactically, one passes different parameters to the <code class="docutils literal notranslate"><span class="pre">access</span></code> statement.
The first parameter is a path to a <code class="docutils literal notranslate"><span class="pre">String</span></code>-literal containing a InfluxQL query, the second parameter is a mode of the form <code class="docutils literal notranslate"><span class="pre">INFLUXDB(StringLiteral)</span></code>,
where the parameter of the mode is a <code class="docutils literal notranslate"><span class="pre">String</span></code>-literal containing a path to a <a class="reference external" href="https://yaml.org/">YAML</a> configuration to connect to the InfluxDB endpoint.
In this case, the result is always a <code class="docutils literal notranslate"><span class="pre">List</span></code> of <code class="docutils literal notranslate"><span class="pre">Double</span></code> values.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">main</span>
  <span class="n">List</span><span class="o">&lt;</span><span class="n">Double</span><span class="o">&gt;</span> <span class="nb">list</span> <span class="o">:=</span> <span class="n">access</span><span class="p">(</span>
  <span class="s2">&quot;from(bucket: </span><span class="se">\&quot;</span><span class="s2">petwin</span><span class="se">\&quot;</span><span class="s2">)</span>
    <span class="o">|&gt;</span> <span class="nb">range</span><span class="p">(</span><span class="n">start</span><span class="p">:</span> <span class="o">-</span><span class="mi">1</span><span class="n">h</span><span class="p">,</span> <span class="n">stop</span><span class="p">:</span> <span class="o">-</span><span class="mi">1</span><span class="n">m</span><span class="p">)</span>
    <span class="o">|&gt;</span> <span class="nb">filter</span><span class="p">(</span><span class="n">fn</span><span class="p">:</span> <span class="p">(</span><span class="n">r</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="n">r</span><span class="p">[</span>\<span class="s2">&quot;_measurement</span><span class="se">\&quot;</span><span class="s2">] == </span><span class="se">\&quot;</span><span class="s2">chili</span><span class="se">\&quot;</span><span class="s2">)</span>
    <span class="o">|&gt;</span> <span class="nb">filter</span><span class="p">(</span><span class="n">fn</span><span class="p">:</span> <span class="p">(</span><span class="n">r</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="n">r</span><span class="p">[</span>\<span class="s2">&quot;_field</span><span class="se">\&quot;</span><span class="s2">] == </span><span class="se">\&quot;</span><span class="s2">temperature</span><span class="se">\&quot;</span><span class="s2">)</span>
    <span class="o">|&gt;</span> <span class="nb">filter</span><span class="p">(</span><span class="n">fn</span><span class="p">:</span> <span class="p">(</span><span class="n">r</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="n">r</span><span class="p">[</span>\<span class="s2">&quot;name</span><span class="se">\&quot;</span><span class="s2">] == </span><span class="se">\&quot;</span><span class="s2">faarikaal1</span><span class="se">\&quot;</span><span class="s2">)</span>
    <span class="o">|&gt;</span> <span class="n">aggregateWindow</span><span class="p">(</span><span class="n">every</span><span class="p">:</span> <span class="mi">5</span><span class="n">m</span><span class="p">,</span> <span class="n">fn</span><span class="p">:</span> <span class="n">mean</span><span class="p">,</span> <span class="n">createEmpty</span><span class="p">:</span> <span class="n">false</span><span class="p">)</span>
    <span class="o">|&gt;</span> <span class="k">yield</span><span class="p">(</span><span class="n">name</span><span class="p">:</span> \<span class="s2">&quot;mean</span><span class="se">\&quot;</span><span class="s2">)&quot;</span><span class="p">,</span>
  <span class="n">INFLUXDB</span><span class="p">(</span><span class="s2">&quot;petwin.yml&quot;</span><span class="p">));</span>
  <span class="nb">print</span><span class="p">(</span><span class="nb">list</span><span class="o">.</span><span class="n">content</span><span class="p">);</span>
<span class="n">end</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Currently, only InfluxQL queries with a single return variable are supported. Influx-mode <code class="docutils literal notranslate"><span class="pre">access</span></code> statements are not type-checked.</p>
</div>
</section>
<section id="advanced-semantic-access">
<h2>Advanced Semantic Access<a class="headerlink" href="#advanced-semantic-access" title="Permalink to this heading">¶</a></h2>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The following section describes a feature that is on active development on a feature branch (<code class="docutils literal notranslate"><span class="pre">lazy</span></code>) and is not available on the master branch.</p>
</div>
<p><a class="reference external" href="https://doi.org/10.1007/978-3-031-06981-9_12">Advanced query access in SMOL</a> is a tight coupling between classes and the query that retrieves its contents from an external database.
To this end, a class can be annotated with a <em>retrieval query</em>, and a special statement loads all elements of this class through this query, possibly refined with a restriction.
Furthermore, we enable lazy loading for retrieval queries:
if a class <code class="docutils literal notranslate"><span class="pre">C</span></code> refers to another class <code class="docutils literal notranslate"><span class="pre">D</span></code> through a field <code class="docutils literal notranslate"><span class="pre">f</span></code>, then the query of the second class <code class="docutils literal notranslate"><span class="pre">D</span></code> is only executed if the field <code class="docutils literal notranslate"><span class="pre">f</span></code> is accessed.</p>
<section id="retrieval-queries">
<h3>Retrieval Queries<a class="headerlink" href="#retrieval-queries" title="Permalink to this heading">¶</a></h3>
<p><em>retrieve, anchor</em></p>
</section>
<section id="lazy-loading">
<h3>Lazy Loading<a class="headerlink" href="#lazy-loading" title="Permalink to this heading">¶</a></h3>
<p><em>QFut etc.</em></p>
</section>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
    
        <div id="show_right_sidebar">
            <p><a class="toggle_right_sidebar" href="#"><span class="icon"><</span><span>Page contents<span></a></p>
        </div>

        <div id="right_sidebar">
            <p><a class="toggle_right_sidebar" href="#"><span class="icon">></span><span>Page contents:<span></a></p>
            <div class="page_toc">
                <ul>
<li><a class="reference internal" href="#">Semantic Access</a><ul>
<li><a class="reference internal" href="#semantic-lifting">Semantic Lifting</a><ul>
<li><a class="reference internal" href="#ontology-and-virtualization">Ontology and Virtualization</a></li>
</ul>
</li>
<li><a class="reference internal" href="#semantic-reflection">Semantic Reflection</a><ul>
<li><a class="reference internal" href="#modeling-bridge">Modeling Bridge</a><ul>
<li><a class="reference internal" href="#crossing-the-modeling-bridge">Crossing the Modeling Bridge</a></li>
<li><a class="reference internal" href="#ignoring-fields">Ignoring Fields</a></li>
<li><a class="reference internal" href="#computational-semantic-state-access">Computational Semantic State Access</a></li>
</ul>
</li>
<li><a class="reference internal" href="#query-access">Query Access</a></li>
<li><a class="reference internal" href="#shape-access">Shape Access</a></li>
<li><a class="reference internal" href="#concept-access">Concept Access</a></li>
</ul>
</li>
<li><a class="reference internal" href="#time-series-access">Time Series Access</a></li>
<li><a class="reference internal" href="#advanced-semantic-access">Advanced Semantic Access</a><ul>
<li><a class="reference internal" href="#retrieval-queries">Retrieval Queries</a></li>
<li><a class="reference internal" href="#lazy-loading">Lazy Loading</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            </div>
        </div>
    

      <div class="clearer"></div>
    </div>
    <div class="button_nav_wrapper">
        <div class="button_nav">
            <div class="left">
                
                <a href="classes.html">
                    <span class="icon"><</span><span>Classes</span></a>
                
            </div>

            <div class="right">
                
                    <a href="fmos.html"><span>Functional Mock-Up Objects</span><span class="icon">></span></a>
                
            </div>
        </div>
    </div>


    <div class="footer" role="contentinfo">
        &#169; Copyright 2022, Eduard Kamburjan, Rudolf Schlatte.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 6.1.3.
    </div>

<p id="theme_credit">Styled using the <a href="https://github.com/piccolo-orm/piccolo_theme">Piccolo Theme</a></p>
  </body>
</html>